# Privacy & GDPR Compliance

## Data Minimization Principles

CV Customiser follows strict data minimization principles in compliance with GDPR and other privacy regulations.

## What Data We Store

### User Authentication Data (Firebase Auth)
- **Email address**: Required for authentication
- **Display name**: Optional, from Google sign-in only
- **User ID (UID)**: Auto-generated by Firebase, used for file access control
- **Authentication timestamps**: Last sign-in time

**Rationale**: Necessary for providing the service and securing user data.

### User Files (Firebase Storage)
- **Source files**: 
  - `original_cv.tex` - User's CV template
  - `extensive_cv.txt` - User's extended CV
  - Strategy documents (CV, cover letter, cold email guidelines)
- **Generated files**:
  - Customized CVs (LaTeX and PDF)
  - Cover letters (text)
  - Cold emails (text)

**Rationale**: Core functionality requires these files. Users have full control to delete them.

### Session Metadata
- **Session ID**: Timestamp-based identifier
- **Company name and job title**: From job descriptions (necessary for file naming and context)
- **Creation and update timestamps**: For session management
- **Generation status**: To track completion

**Rationale**: Necessary for providing history and re-accessing generated documents.

### Chat History (Per Session)
- **User messages**: Job description input or URL
- **Assistant responses**: Status messages and generation logs
- **Timestamps**: When each message was sent

**Rationale**: Provides context for refinements and debugging. Can be disabled or auto-deleted.

## What Data We DO NOT Store

❌ **Job descriptions**: Only stored temporarily in session metadata, not analyzed or retained long-term  
❌ **Personal information from CVs**: Never extracted or stored separately  
❌ **Usage analytics**: No tracking pixels, no third-party analytics  
❌ **IP addresses**: Not logged or stored  
❌ **Browser fingerprints**: Not collected  
❌ **Cookies**: Only essential Firebase Auth cookies  
❌ **Email content**: Cold emails are generated but not sent by us  
❌ **Communication metadata**: No record of who you send documents to  

## Data Processing

### Where Data is Processed
- **Firebase Storage**: US or EU (configurable per project)
- **Google Gemini API**: Job descriptions sent for AI processing (not stored by Google for training)
- **Next.js Server**: Temporary processing only (no persistent storage)

### Third-Party Services
1. **Firebase (Google Cloud)**
   - Purpose: Authentication and file storage
   - Data shared: Email, files you upload
   - Privacy: [Firebase Privacy Policy](https://firebase.google.com/support/privacy)

2. **Google Gemini API**
   - Purpose: AI content generation
   - Data shared: Job descriptions, your CV content for generation
   - Privacy: Data not used for model training
   - Policy: [Google AI Terms](https://ai.google.dev/terms)

3. **No other third parties**: No analytics, no ads, no tracking

## Your Rights (GDPR)

### Right to Access
- View all your files in the Settings page
- Download your data (see Data Export below)

### Right to Erasure ("Right to be Forgotten")
- Delete individual sessions via UI
- Delete all your data via account deletion
- API endpoint: `DELETE /api/user/delete-account`

### Right to Data Portability
- Export all your data in JSON format
- API endpoint: `GET /api/user/export-data`

### Right to Rectification
- Update or replace source files anytime
- Edit generated documents before download

### Right to Restrict Processing
- Pause document generation (close the tab)
- Don't upload files you don't want processed

### Right to Object
- You can object to processing by deleting your account

## Data Retention

### Automatic Deletion
- **Temporary files**: Deleted immediately after processing (LaTeX compilation)
- **Failed generations**: Temp files cleaned up after 1 hour
- **Session chat history**: Optional 30-day auto-deletion (configurable)

### User-Controlled Deletion
- **Sessions**: Delete anytime via UI
- **Source files**: Replace or delete anytime via Settings
- **Account**: Full account deletion available

### No Retention Policy
We do NOT automatically delete your data. You maintain full control and can keep your files forever or delete them anytime.

## Security Measures

### Data Protection
- **Encryption at rest**: Firebase Storage encrypts all files
- **Encryption in transit**: HTTPS only, TLS 1.2+
- **Access control**: User-specific storage paths, Firebase Security Rules
- **Authentication**: Required for all API endpoints
- **No shared access**: Users cannot access other users' files

### Server Security
- **Temporary files**: Isolated per user, auto-deleted
- **No logging of sensitive data**: File contents never logged
- **Signed URLs**: Short expiry (15 minutes) for downloads
- **Rate limiting**: Prevents abuse (TODO: implement)

## Data Breach Notification

In the unlikely event of a data breach:
1. We will notify affected users within 72 hours
2. We will notify supervisory authorities if required
3. We will provide details of what data was affected
4. We will provide guidance on protective measures

Contact: [Your Email] for security concerns

## Children's Privacy

This service is not intended for users under 16 years old. We do not knowingly collect data from children.

## Changes to Privacy Policy

We will notify users of any material changes to this privacy policy via:
- Email to registered users
- Notice in the application UI

## Contact

For privacy concerns or to exercise your rights:
- Email: [Your Email]
- Data Protection Officer: [If required for your organization]

## Legal Basis for Processing (GDPR Article 6)

- **Consent**: By uploading files and using the service
- **Contract**: Necessary to provide the service you requested
- **Legitimate Interests**: Improving service quality (anonymized only)

## Technical Implementation

See `app/api/user/` endpoints for:
- Data export
- Account deletion
- Session management

## Compliance Checklist

- [x] Data minimization
- [x] Purpose limitation
- [x] Storage limitation (user-controlled)
- [x] Integrity and confidentiality
- [x] Accountability
- [x] User rights implementation
- [ ] Cookie consent (if adding analytics)
- [ ] Privacy policy UI display
- [ ] Terms of service
- [ ] Data processing agreement (if needed)

Last Updated: 2025-01-05
